<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-127104115-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-127104115-1');
</script>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-3659651196402257",
    enable_page_level_ads: true
  });
</script>
  <title>Attendance Manager</title>
  <script type="text/javascript">

if (screen.width >= 770) {
   var t  = new Date(),
      td = t.getUTCDate(),
      tm = t.getUTCMonth() + 1,
      ty = t.getUTCFullYear();
document.location = "/withtt/combined/"+ty+"/"+tm;
}

</script>
  <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <meta name="theme-color" content="#01518c" />
     <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
<!-- <script type="text/javascript">
<%  var t  = new Date(),
      td = t.getUTCDate(),
      tm = t.getUTCMonth() + 1,
      ty = t.getUTCFullYear();%>
var is_mobile = /symbian|tizen|midp|uc(web|browser)|MSIE(5.0|6.0|7.0|8.0)|tablet/i.test(navigator.userAgent);  if(!is_mobile) window.location.href = "/withtt/combined/<%=ty%>/<%=tm%>";</script> -->
   <style type="text/css">
   *{  margin: 0px;
  padding: 0px;
  box-sizing: border-box;

}

body {               width:   100%;
              
               background:white;
  font-family:   'Montserrat', sans-serif;
                   display:   -webkit-box;
          -webkit-box-pack:   center;
             
} 
    #wrapper{
      
       
      max-width:    100%;
                   margin:    0;
                  display:    -webkit-box;
       -webkit-box-orient:    vertical;
         -webkit-box-flex:    1;

           

    }
    
    nav{ 
      width: 100%;
      height: 50px;
      background:#1c79be;
      color: white;
      position: fixed;
      top: 0;
    }

    nav li{
      display: inline-block;
      list-style: none;
    }

    li {
    float: right;
}
li a{
    display: block;
    color: white;
    text-align: center;
  
    text-decoration: none;
}

.log{  padding: 14px 16px;}
   nav ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #1c79be;

}
a {text-decoration:none;}
.error{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem;color:#721c24;background-color:#f8d7da;border-color:#f5c6cb;text-align: center;}
.boxwrap{ -webkit-box-flex:   1;
           display:flex;
           justify-content:center;
           align-items:center;
           margin-top:  60px;}

 .box{
 border: 2px solid white;
border-radius: 5px;
 background:#e9e9eb;
 height: auto;
  width: 350px;
   margin-bottom: 10px;
 }

 a {text-decoration:none;}

 body{background-image: linear-gradient(to right, #145bab,#88d4e1);}

.subholder{
  width: 98%;margin-top: 7px;margin-bottom: 7px;
  margin-left: auto;margin-right: auto;
  background: white;border-radius: 5px;
}

span{font-weight: 600}

   </style>
</head>
<body>
<div id="wrapper">
<nav>
    <ul><%if(!currentUser){%>

      <li><a href="/login" class="log">Login</a></li>
      <li><a href="/register" class="log">Sign Up</a></li><%}else{%>
      <li style="float: left; margin: 15px; margin-left: 25px; font-size: 20px;"><a href="/withtt"><i class="fas fa-arrow-left"></i></a></li>
      <li style="float: left; margin: 15px; margin-left: 25px; font-size: 20px;"><a href="/"><i class="fas fa-home"></i></a></li>
      <li><a href="/logout" class="log">Logout </a></li><%}%>
    </ul>
</nav>

<section>
  <div class="boxwrap">
   
   <div class="box subs"> 
<% if (error && error.length>0) { -%>
       <div class="error"><%=error%></div>
    <% } -%>

    <p style="display: block;font-size: 20px; background: white;text-align: center;">subjects</p>
     <% if (subject.length==0) { -%>
          <p style="display: block;font-size: 20px;text-align: center; color: green; margin-top: 20px;">you haven't added a subject yet.</p>
     <% } -%>
   <% for (var i = 0; i < subject.length; i++) { -%>
  <div class="subholder">
   <div style="display: flex;flex-direction:row;justify-content: space-between;border-bottom: 2px solid #969696; ">
     <p style="padding: 7px 0 0 20px ; "><%=subject[i].name%>  </p><a href="/sub/edit/<%=subject[i]._id%>" style="float: right;margin:7px 3px 0px 2px ; color: #1c79be;display: flex;flex-direction: row;" ><p>edit</p><i class="fas fa-edit"></i></a></div>

  <p style="padding: 7px 0 0 30px ; ">Total: <span><%=subject[i].total%></span> &nbsp&nbsp
 Attended: <span><%=subject[i].attended%></span></p>
  <% if (subject[i].total ===0 && subject[i].attended ===0) { -%>
   <p style="padding: 7px 0 0 30px ;">Percent attended: <span>0</span></p>
  <% } else { %>
     <p style="padding: 7px 0 0 30px ;">Percent attended:<span> <%=Math.floor(subject[i].attended/subject[i].total*100)%></span></p>
  <% } -%>
   <p style="padding: 7px 0 0 30px ;">Minimum required: <span><%=subject[i].min%></span>%</p>
   <% var canbunk = Math.floor(subject[i].attended*100/subject[i].min - subject[i].total)%>
   <% var cantbunk = Math.floor((subject[i].min*subject[i].total/100 - subject[i].attended)*100/(100-subject[i].min))%>
<% if (canbunk==0 || cantbunk ==0) { -%>
  <p style="padding: 7px 0 10px 30px ;color: green">you are on the track!</p>
<% } else { -%>
  <% if (subject[i].min<Math.floor(subject[i].attended/subject[i].total*100)) { -%>
    <p style="padding: 7px 0 10px 30px ;color: green">you can bunk <span><%=canbunk%></span> 
      <%  if(canbunk==1){%>
 class.
 <% }else{%>
 classes.
 <%}%>
</p>
  <% } else {if(subject[i].min==Math.floor(subject[i].attended/subject[i].total*100)){ -%>
   <p style="padding: 7px 0 10px 30px ;color: green">you are on the track!</p>
   <%}else{%>
    <p style=" padding: 7px 0 10px 30px ; color:#cc1c1c;">you need to attend next <span><%=cantbunk%></span>
    <%  if(cantbunk==1){%>
 class.
 <% }else{%>
 classes.
 <%}%>
</p>

  <% } -%>
  
   
 <% }-%> 
<% } -%>
   
 
 </div>
<% }-%> <p style="display: block;font-size: 20px; background: white;text-align: center;margin-top: 10px;margin-bottom: 10px;padding-top: 10px;padding-bottom: 10px;">add a subject:</p>
<div style="background: white;"><form method="POST" action="/withtt/addSub">
  <input style="margin-left: 10%; margin-top: 20px; padding: 2px 5px 2px 10px; width: 80%; margin-bottom:2px;height:30px; "type="text" name="name" placeholder="Name of subject or course" required>
  <input style="margin-left: 10%; padding: 2px 5px 2px 10px; width: 80%; margin-bottom:2px; height:30px;" type="number" name="total" placeholder="Total Classes" required title="total should be greater than attended" min="0">
  <input style="margin-left: 10%; padding: 2px 5px 2px 10px; width: 80%; margin-bottom:2px;height:30px; " type="number" name="attended"  placeholder="Attended Classes" required title="total should be greater than attended" min="0">
  <input style="margin-left: 10%;margin-bottom: 20px; padding: 2px 5px 2px 10px; width: 80%;height:30px;  " type="number" min="1" max="100" name="min" placeholder="Minimum attendance required(%)" required></div>
 <button style="display: block;font-size: 20px;
 margin: auto;cursor: pointer;
 width: 50%; background: white;text-align: center;margin-top: 10px;margin-bottom: 10px;padding-top: 2px;padding-bottom: 2px;">Add</button>
</form>



   </div> 
   
 
  

   </div> 
  </div>

</section>

</div>


  


</body>
</html>


